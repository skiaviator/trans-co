<!DOCTYPE html>
    <html>
        <meta charset="UTF-8">
        <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>


<body>
<link rel="stylesheet" href="style.css">
    <div id="webpage">
        <div id= "left"> <img src="123.png" style="width: 240px; height: 120px;"/></div>
        <div id="up"> 
            <ul>
                <h1>Firma transportowa "SuperLion" Sp. z o. o.</h1>
                <li><a href="distribution.html">ROZKŁAD JAZDY</a></li> 
                <li><a href="contact.html">KONTAKT</a></li> 
                <li><a href="login.html">ZALOGUJ SIĘ</a></li> 
                <li><a href="register.html">ZAREJESTRUJ SIĘ</a></li> 
            </ul>
         </div>
        <div id="description"> <h3>Wypełnij poniższy formularz, aby się zarejestrować.<br> (*) - POLE OBOWIĄZKOWE</h3> </div>
        <div id="form1"> 
            <script id="register">
               var stat;
                async function register(){
                    var mieszkanie = document.getElementById('apartmentNumber').value;
                    var budynek = document.getElementById('buildingNumber').value;
                    var miasto = document.getElementById('city').value;
                    var kraj = document.getElementById('country').value;
                    var kod = document.getElementById('postalCode').value;
                    var ulica = document.getElementById('street').value;
                    var data = document.getElementById('date').value;
                    var mail = document.getElementById('email').value;
                    var imie = document.getElementById('name').value;
                    var telefon = document.getElementById('telephon').value;
                    var nazwisko = document.getElementById('last_name').value;
                    if(imie==""||budynek==""||miasto==""||kraj==""||kod==""||ulica==""||data==""||mail==""||
                    telefon==""||nazwisko=="")
                 return  alert('Rejestracja nie powiodła się! Niepoprawnie uzupełniono dane!');
                const dane =
                {
                    addressRequest: {
                    apartmentnumber: mieszkanie,
                    buildingnumber: budynek,
                    city: miasto,
                    country: kraj,
                    postcode: kod,
                    street: ulica
                  },
                  birthdate: data,
                  email: mail,
                  firstname: imie,
                  phonenr: telefon,
                  surname: nazwisko
                };
                
                await axios.post('http://localhost:8080/customers', JSON.stringify(dane), {headers:{'Content-Type': 'application/JSON'}})
                .then((response) => 
                {
                    console.log(response.data);
                    console.log(response.status)
                    stat = response.status;
                });
                
                if(stat==200)
               { location.replace("login.html"); return alert('Pomyslnie zarejestrowano!'); }
                else {return alert('Rejestracja nie powiodła się! Spróbuj jeszcze raz!');}  
            }
                </script>
    <form>
        <label >Imię(*):</label><br>
        <input type="text" id="name"> <br>
        <label >Nazwisko(*):</label><br>
        <input type="text" id="last_name"> <br>
        <label >Data urodzenia(*):</label><br>
        <input type="date" id="date"> <br>
        <label >E-mail(*):</label><br>
        <input type="email" id="email"> <br>
        <label >Numer telefonu(*):</label><br>
        <input type="text" id="telephon"> <br>
        <label >Miasto(*):</label><br>
        <input type="text" id="city"> <br>
        <label >Kraj(*):</label><br>
        <input type="text" id="country"> <br>
        <label >Kod pocztowy(*):</label><br>
        <input type="text" id="postalCode"> <br>
        <label >Ulica(*):</label><br>
        <input type="text" id="street"> <br>
        <label >Numer budynku(*):</label><br>
        <input type="number" id="buildingNumber"> <br>
        <label >Numer mieszkania:</label><br>
        <input type="number" id="apartmentNumber"> <br><br>
        <input type ="submit" value ="Zarejestruj się" id = "send" onclick="register()">
    </form>
</div>
</div>
    </body>
    </html>
